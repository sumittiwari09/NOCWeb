
@{
    ViewBag.Title = "Addbeneficiary";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section styles{

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    @*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css" > *@
    @*<link href="~/plugins/datatables/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css" / > *@
    <link href="~/plugins/datatables/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css" />
    <link href="~/plugins/sweet-alert2/sweetalert2.min.css" rel="stylesheet" type="text/css">
    <link href="~/plugins/animate/animate.css" rel="stylesheet" type="text/css">
    <style>
        .margines {
            margin-top: 15px !important;
            margin-bottom: 15px !important;
        }
    </style>
}

<div class="row">
    <div class="col-sm-12">
        <div class="page-title-box">

            <div class="float-right">

                <ol class="breadcrumb">


                    <li class="breadcrumb-item active">@ViewBag.Create</li>
                </ol>
            </div>
            <h4 class="page-title">Money Transfer</h4>
        </div><!--end page-title-box-->
    </div><!--end col-->
</div>
<div class="row" id="SecondShow">
    <input type="hidden" id="MobileNo" value="@ViewBag.MobileNo" />
    <div class="col-lg-2">
        <nav class="navbar navbar-light bg-light">
            <div class="container-fluid">
                <a class="btn btn-primary col-lg-12 margines" id="BeneficiaryList" href="@Url.Action("MoneyTransfer", "Category", new { MobileNo = ViewBag.MobileNo })"><i class="fa fa-list"> Beneficiary List</i></a>
                @*<button class="btn btn-primary col-lg-12 margines" id="TransferMoney" onclick="TransferMoney()"><i class="fa fa-money-bill-alt"></i> Transfer Money</button>*@
                <button class="btn btn-primary col-lg-12 margines" id="TransactionList" onclick="TransactionList()"><i class="fa fa-list"></i> Transaction List</button>

            </div>

        </nav>
    </div>

    <div class="col-lg-10" id="ShowUpdatediv">
        @using (Html.BeginForm("AddBeneficiary", "Category", FormMethod.Post, new { @class = "formcreateupdate", @id = "frmAddUpdate", enctype = "multipart/form-data" }))
        {
            <div class="card">
                <div class="card-header">
                    <h4 class="mt-0 header-title float-left">Money Transfer/ADD Beneficiary</h4>
                    @*<button onclick="location.href='@Url.Action("Create")';return false;" class="btn btn-gradient-primary float-right waves-effect waves-light"><i class="mdi mdi-plus-circle-outline mr-2"></i> @ViewBag.Create</button>*@
                </div>
                <div class="card-body">


                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Customer/Remitter Mobile No<span style="color:red">*</span></label>
                        <div class="col-sm-6">
                            <input name="iRmtMob" id="MobileNo" type="text" value="@ViewBag.MobileNo" class="form-control" placeholder="Enter Mobile No" readonly required>
                        </div>
                    </div>
                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Beneficiary Name<span style="color:red">*</span></label>
                        <div class="col-sm-6">
                            <input name="sBenNam" id="BeneficiaryName" type="text" value="" class="form-control" placeholder="Enter Beneficiary Name" required autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Beneficiary Mobile Number<span style="color:red">*</span></label>
                        <div class="col-sm-6">
                            <input name="sBenMob" id="BeneficiaryMobile" type="text" value="" class="form-control" placeholder="Enter Beneficiary Mobile" required autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Beneficiary Bank Name<span style="color:red">*</span></label>
                        <div class="col-sm-6">
                            <input name="sBenBankName" id="BeneficiaryBankName" type="text" value="" class="form-control" placeholder="Enter Beneficiary Bank Name" required autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Beneficiary Bank Account No<span style="color:red">*</span></label>
                        <div class="col-sm-6">
                            @*<input name="sBenActNo" id="BeneficiaryBankAccountNo" type="password" value="" class="form-control" placeholder="Enter Beneficiary Bank Account" required autocomplete="off">*@

                            <input class="form-control col-sm-12" id="BeneficiaryBankAccountNo" type="password" placeholder="Enter Beneficiary Bank Account" autocomplete="off" required name="sBenActNo">
                            <span id="withoutslash-loginAccNo" style="display: none;top: -28px;position: relative;place-content: end;margin-right: 10px;align-items: center;width: inherit;left: 19rem;">
                                <i class="fa fa-eye EyeIcon" id="logineyeAccNo" style="color:black!important" onclick="revealPassword(this,'BeneficiaryBankAccountNo')"></i>
                            </span>
                            <span id="withslash-loginAccNo" style="top: -28px; position: relative; display: flex; margin-right: 10px; align-items: center; width: inherit; left: 19rem; place-content: end;">
                                <i class="fa fa-eye-slash EyeIcon" id="logineyeAccNo" onclick="revealPassword(this,'BeneficiaryBankAccountNo')"></i>
                            </span>
                        </div>
                    </div>
                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Re-Enter Bank Account No<span style="color:red">*</span></label>
                        <div class="col-sm-6">
                            @*<input name="sBenREActNo" id="ReEnterBankAccountNo" type="password" value="" class="form-control" placeholder="Enter Beneficiary Re-Bank Account" required autocomplete="off">*@


                            <input class="form-control col-sm-12" id="ReEnterBankAccountNo" type="password" placeholder="Enter Beneficiary Re-Bank Account" autocomplete="off" required name="sBenREActNo">
                            <span id="withoutslash-loginReAccNo" style="display: none;top: -28px;position: relative;place-content: end;margin-right: 10px;align-items: center;width: inherit;left: 19rem;">
                                <i class="fa fa-eye EyeIcon" id="logineyeReAccNo" style="color:black!important" onclick="revealPassword(this,'ReEnterBankAccountNo')"></i>
                            </span>
                            <span id="withslash-loginReAccNo" style="top: -28px; position: relative; display: flex; margin-right: 10px; align-items: center; width: inherit; left: 19rem; place-content: end;">
                                <i class="fa fa-eye-slash EyeIcon" id="logineyeReAccNo" onclick="revealPassword(this,'ReEnterBankAccountNo')"></i>
                            </span>

                        </div>
                    </div>
                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Account Bank IFSC Code <span style="color:red">*</span></label>

                        <div class="col-sm-6">
                            <input name="sBenIfsc" id="IFSCCode" type="text" value="" class="form-control" placeholder="Enter IFSC Code" maxlength="11" required autocomplete="off" style="text-transform:uppercase">
                        </div>
                    </div>
                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Account Type<span style="color:red">*</span></label>
                        <div class="col-sm-6">
                            <select class="singleselect" id="AccountType" name="sBenActTyp" style="text-align: center;border-radius: 10px;width: 100%;">
                                <option value="">Select Account Type</option>
                                <option value="Saving">Saving</option>
                                <option value="Current">Current</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label">Bank Account Verification<span style="color:red">*</span></label>
                        <div class="col-sm-6">
                            <input type="checkbox" id="verification" name="sBenActVer" value="">
                            <label for="verification"> I agree for Bank Account to transaction purpose</label><br>
                        </div>
                    </div>

                </div>
            </div>
            <footer class="form-footer">
                <div class="pull-right" style="text-align: end;">
                    @*<a href="@Url.Action("ServiceProviderIndex", "Commission")" class="btn btn-default">DISCARD</a>*@
                    <button class="btn btn-primary" type="submit"><i class="fa fa-pulse"></i>Add Beneficiary</button>

                </div>
            </footer>

        }
    </div>
</div>
@section Scripts {
    <script type="text/javascript">

        $(".singleselect").select2();
        $("#verification").change(function () {
            debugger;
            var ver = $(this).val();
            if (ver == '') {
                $(this).val('1');
            }
            else {
                $(this).val('');
            }

        });
        $("#ReEnterBankAccountNo").blur(function () {
            var BankAc = $("#BeneficiaryBankAccountNo").val();
            var ReBankAc = $("#ReEnterBankAccountNo").val();
            if (BankAc != ReBankAc) {

                Swal.fire({
                    position: 'center',
                    icon: 'error',
                    title: "Error",
                    html: '<div>Account Number Doesn`t Match</div>',
                    allowOutsideClick: false,
                    showCloseButton: true,
                    showConfirmButton: false,

                });

                //alert("Please Enter Correct REBank Account");
                //$("#ReEnterBankAccountNo").val('');

                return false;
            }
        })

        //$('#IFSCCode').blur(function () {
        //    if ($("#IFSCCode").val().length > 0) {
        //        var ifscCode = $("#IFSCCode").val().toUpperCase();
        //        if (!validateIFSC(ifscCode)) {
        //            Swal.fire({
        //                position: 'center',
        //                icon: 'error',
        //                title: "Error",
        //                html: `"<b>${ifscCode}</b>" Is not valid, Please Enter Valid IFSC Code<br/><hr style="width: 20rem;margin-left: 15%;"/><ul style="text-align:justify;font-size:15px"><li>Must have 10 digits long.</li><li>First 5 Charecters Should be Alphabets.</li><li>Next 4 Charecters Should be Numeric.</li><li>Last Digit Must be Numeric.</li></ul>`,
        //                allowOutsideClick: false,
        //                showCloseButton: true,
        //                showConfirmButton: false,
        //            });
        //            //$("#IFSCCode").val('');
        //        }
        //    }
        //});

        function validateIFSC(ifscCode) {
            var regex = /^[A-Za-z]{5}[1-9]{4}[a-zA-Z]{1}$/;
            var result = regex.test(ifscCode);
            return result
        }


        function revealPassword(sender, itemId) {

            var formId = sender.id.replace('eye', '');
            console.log(formId)
            var type = $('#' + itemId).attr('type');
            if (type == 'password') {


                console.log('inside password type')
                $('#' + itemId).attr('type', 'text');

                $('#withslash-' + formId).css('display', 'none');
                $('#withoutslash-' + formId).css('display', 'flex');

            }
            if (type == 'text') {
                console.log('inside text type')
                $('#' + itemId).attr('type', 'password');
                $('#withslash-' + formId).css('display', 'flex');
                $('#withoutslash-' + formId).css('display', 'none');
            }
        }
    </script>
}



