@using NewZapures_V2.Models
@{
    ViewBag.Title = "Commission Master";
    ViewBag.Create = "AddCommission";
    Layout = "~/Views/Shared/_Layout.cshtml";
    List<CustomMaster> ServiceType = new List<CustomMaster>();
    if (ViewBag.ServiceType != null)
    {
        ServiceType = (List<CustomMaster>)ViewBag.ServiceType;
    }
    List<CustomMaster> UserType = new List<CustomMaster>();
    if (ViewBag.UserType != null)
    {
        UserType = (List<CustomMaster>)ViewBag.UserType;
    }
    var PartyId = ViewBag.PartyId;
}

@section styles{-->  @*@Styles.Render("~/bundles/datatable");*@\
<link href="~/plugins/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="~/plugins/datatables/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="~/plugins/datatables/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
<link href="~/plugins/sweet-alert2/sweetalert2.min.css" rel="stylesheet" type="text/css">
<link href="~/plugins/animate/animate.css" rel="stylesheet" type="text/css">
<style>
    .customlabel {
        font-size: large;
        padding-right: inherit;
    }

    .hidden {
        display: none;
    }


    .removehidden {
        display: none;
    }
</style>

}

<div class="row">
    <div class="col-sm-12">
        <div class="page-title-box">
            <div class="float-right">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">Zapures</li>
                    <li class="breadcrumb-item">Master</li>
                    <li class="breadcrumb-item active">@ViewBag.Create</li>
                </ol>
            </div>
            <h4 class="page-title">@ViewBag.Title</h4>
        </div><!--end page-title-box-->
    </div><!--end col-->
</div>
<div class="row">
    <div class="col-lg-12">
        @using (Html.BeginForm("CommissionMaster", "Commission", FormMethod.Post, new { @class = "formcreateupdate", @id = "frmAddUpdate", enctype = "multipart/form-data" }))
        {
            <input name="CommissionMasterId" id="CommissionMasterId" type="hidden" value="0">
            <div class="card">
                <div class="card-header">
                    <h4 class="mt-0 header-title float-left">Commission Master</h4>
                    <a class="btn btn-gradient-secondary waves-effect waves-light float-right" href="@Url.Action("CommissionMasterIndex", "Commission")"><i class="fas fa-arrow-left"></i> Back to List</a>
                    @*<button onclick="location.href='@Url.Action("Create")';return false;" class="btn btn-gradient-primary float-right waves-effect waves-light"><i class="mdi mdi-plus-circle-outline mr-2"></i> @ViewBag.Create</button>*@
                </div>
                <div class="card-body">
                    <div class="form-group  is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">User Type</label>
                        <div class="col-sm-6">
                            <select class="singleselect" id="UserType" name="UserType" required>
                                <option value="">Select User Type</option>
                                @{
                                    foreach (var item in UserType)
                                    {
                                        if (item.Id != 5)
                                        {
                                            <option value="@item.Id">@item.text</option>
                                        }
                                    }
                                }

                            </select>
                            @*<input class="form-control col-sm-12" type="text" autocomplete="off" placeholder="Page Title" id="pageTitle" name="PageTitle">*@
                        </div>
                    </div>
                    <div class="form-group  is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Service Type</label>
                        <div class="col-sm-6">
                            <select class="singleselect" id="ServiceTypeId" name="ServiceTypeId" required>
                                <option value="">Select Service Type</option>
                                @{
                                    foreach (var item in ServiceType)
                                    {
                                        <option value="@item.Id">@item.text</option>
                                    }
                                }
                            </select>
                            @*<input class="form-control col-sm-12" type="text" autocomplete="off" placeholder="Page Title" id="pageTitle" name="PageTitle">*@
                        </div>
                    </div>
                    <div class="form-group  is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">What is your Charge Type?</label>
                        <div class="col-sm-6">
                            <input type="radio" id="Percentage" name="ChargeType" value="1" required>
                            <label for="html" class="customlabel">Percentage</label>
                            <input type="radio" id="Rate" name="ChargeType" value="2" required>
                            <label for="css" class="customlabel">Amount</label>
                            @*<input class="form-control col-sm-12" type="text" autocomplete="off" placeholder="Page Title" id="pageTitle" name="PageTitle">*@
                        </div>
                    </div>

                    <div class="form-group  is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Commission Based on</label>
                        <div class="col-sm-6">
                            <input type="radio" id="Slab" name="Commissionrang" value="1" required>
                            <label for="html" class="customlabel">Slab</label>
                            <input type="radio" id="singlevalue" name="Commissionrang" value="2" required>
                            <label for="css" class="customlabel">Single value</label>
                            @*<input class="form-control col-sm-12" type="text" autocomplete="off" placeholder="Page Title" id="pageTitle" name="PageTitle">*@
                        </div>
                    </div>

                    <div class="form-group  is-empty row">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Is Customer Fees Applicable? </label>
                        <div class="col-sm-6" id="IsCustomerFeesApplicable">
                            <input type="radio" id="CustomerFeeNo" name="IsCustomerFeesApplicable" value="0" required>
                            <label for="html" class="customlabel">No</label>
                            <input type="radio" id="CustomerFeeyes" name="IsCustomerFeesApplicable" value="1">
                            <label for="css" class="customlabel">Yes</label>
                            @*<input class="form-control col-sm-12" type="text" autocomplete="off" placeholder="Page Title" id="pageTitle" name="PageTitle">*@
                        </div>
                    </div>
                    <div class="form-group  is-empty row hidden" id="CustomerFeeType">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Customer Fees Type </label>
                        <div class="col-sm-6">
                            <input type="radio" id="Percentage" name="CustomerFeeType" value="1">
                            <label for="html" class="customlabel">Percentage</label>
                            <input type="radio" id="Rate" name="CustomerFeeType" value="2">
                            <label for="css" class="customlabel">Amount</label>
                        </div>
                    </div>
                    <div class="form-group is-empty hidden row " id="CustomerFeevalue">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Customer Fee value</label>
                        <div class="col-sm-6">
                            <input name="CustomerFeeValue" id="CustomerFeeValue" type="number" value="" class="form-control" placeholder="Enter Customer Fee value">
                        </div>
                    </div>
                    <div class="form-group is-empty row " id="Chargesvalue">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Charges value</label>
                        <div class="col-sm-6">
                            <input name="ChargeValue" id="ChargeValue" type="number" value="" class="form-control" placeholder="Enter Charges value">
                        </div>
                    </div>
                    <div class="form-group  is-empty row" id="MinMaxApplicableOn">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Min-Max Condition Applicable</label>
                        <div class="col-sm-6">
                            <input type="radio" id="MaxMinNo" name="MinMaxApplicableOn" value="0">
                            <label for="html" class="customlabel">No</label>
                            <input type="radio" id="MaxMinyes" name="MinMaxApplicableOn" value="1">
                            <label for="css" class="customlabel">Yes</label>
                        </div>
                    </div>
                    <div class="form-group  is-empty hidden row" id="MinMaxvalue">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Customer Fees Type </label>
                        <div class="col-sm-6">
                            <input type="radio" id="Min" name="MinMaxvalue" value="1">
                            <label for="html" class="customlabel">Min</label>
                            <input type="radio" id="Max" name="MinMaxvalue" value="2">
                            <label for="css" class="customlabel">Max</label>
                            <input name="MinMaxApplicablevalue" id="MinMaxApplicablevalue" type="number" value="" class="form-control" placeholder="Enter  value">
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="checkbox" id="Isdefault" name="isdefault" value="1" checked>
                        <label for="isdefault">Is Default</label><br>
                    </div>
                    <div class="form-group  is-empty row removehidden" id="usertypedata">
                        <label for="nameInput" class="col-sm-3 control-label customlabel">Service Type</label>
                        <div class="col-sm-6">
                            <select class="singleselect" id="IsdefaultPartyId" name="IsdefaultPartyId">
                                <option value="">Select User</option>

                            </select>
                            @*<input class="form-control col-sm-12" type="text" autocomplete="off" placeholder="Page Title" id="pageTitle" name="PageTitle">*@
                        </div>
                    </div>
                </div>
            </div>
            <footer class="form-footer">
                <div class="pull-right" style="text-align: end;">
                    <a href="@Url.Action("CommissionMasterIndex", "Commission")" class="btn btn-default">DISCARD</a>
                    <button class="btn btn-primary"> Save </button>
                </div>
            </footer>
        }
    </div>
</div>
@section Scripts {
    @*@Scripts.Render("~/bundles/datatablejs")*@

    <!--<script src="~/plugins/datatables/jquery.dataTables.min.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/dataTables.bootstrap4.min.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/dataTables.buttons.min.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/buttons.bootstrap4.min.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/jszip.min.js" type="text/javascript"></script>-->
    @*<script src="~/plugins/datatables/pdfmake.min.js" type="text/javascript"></script>*@
    <!--<script src="~/plugins/datatables/vfs_fonts.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/buttons.html5.min.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/buttons.print.min.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/buttons.colVis.min.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/dataTables.responsive.min.js" type="text/javascript"></script>
    <script src="~/plugins/datatables/responsive.bootstrap4.min.js" type="text/javascript"></script>
    <script src="~/scripts/pages/jquery.datatable.init.js" type="text/javascript"></script>
    <script src="~/plugins/sweet-alert2/sweetalert2.min.js"></script>
    <script src="~/scripts/pages/jquery.sweet-alert.init.js"></script>-->
    <script src="~/Content/globalDomain.js"></script>
    <script type="text/javascript">
        $(".singleselect").select2();
        $('#IsCustomerFeesApplicable input[type=radio]').change(function () {
            var data = $('input[name="IsCustomerFeesApplicable"]:checked').val();
            if (data == 1) {
                $("#CustomerFeeType").removeClass("hidden");
                $("#CustomerFeevalue").removeClass("hidden");
                $('input[name="CustomerFeeType"]').prop('required', true);
            }
            if (data == 0) {
                $("#CustomerFeeType").addClass("hidden");
                $("#CustomerFeevalue").addClass("hidden");
                $('input[name="CustomerFeeType"]').prop('required', false);
            }
        });
        $('#MinMaxApplicableOn input[type=radio]').change(function () {
            var data = $('input[name="MinMaxApplicableOn"]:checked').val();
            if (data == 1) {
                $("#MinMaxvalue").removeClass("hidden");
                $("#MinMaxApplicablevalue").prop('required', true);
                $('input[name="MinMaxvalue"]').prop('required', true);
            }
            if (data == 0) {
                $("#MinMaxvalue").addClass("hidden");
                $("#MinMaxApplicablevalue").prop('required', false);
                $('input[name="MinMaxvalue"]').prop('required', false);
            }
        });

          $("#Isdefault").change(function () {
            var data = $(this).val();
            var Usertypeid = $("#UserType").val();
            if (data == 0) {

                $("#Isdefault").val(1);
                $("#UserDefault").select2("destroy");
                $("#UserDefault").html('');

            }
            else {

                $("#Isdefault").val(0);

                AddUserList(Usertypeid);
            }

        });

        function AddUserList(Type) {
            var strHtml = "";
            strHtml += "<option value=''>Select User</option>";
            if (Type == "") {

                alert('Please Select UserType');
                $("#usertypedata").addClass('removehidden');
                return false;
            }
            var Params = JSON.stringify(
                {
                    Type: Type,
                    PartyId:'@PartyId'

                });
            $.ajax({
                url: GetglobalDomain() +"/AdminAjaxRequestPage/GetUserList",
                type: 'POST',
                data: Params,
                dataType: "json",
                contentType: "application/json",

                success: function (response) {

                    debugger;


                    for (var i = 0; i < response.Data.length; i++) {


                        strHtml += "<option value='" + response.Data[i].Id + "'>" + response.Data[i].Text + "</option>"


                    }

                    $("#IsdefaultPartyId").select2("destroy");

                    $("#IsdefaultPartyId").html(strHtml);
                    $("#IsdefaultPartyId").select2();
                    $("#usertypedata").removeClass('removehidden');

                }
            });
        }
    </script>
}
